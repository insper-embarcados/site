
# Pico - W 

O `Raspberry Pi Pico` e o `Pico W` são bem semelhantes. Para a grande maioria dos projetos não haverá diferença, tanto que até o momento não haviamos falado da existencia dessa versão Pico W. O `Raspberry Pi Pico W` é uma versão do Pico que inclui conectividade wireless de 2.4GHz, isso abre oportunidades para uma variedade maior de aplicações.

![](imgs/compare-front-pico-vs-pico-w.png)

!!! tip
    Datasheet Pico W: [https://datasheets.raspberrypi.com/picow/pico-w-datasheet.pdf](https://datasheets.raspberrypi.com/picow/pico-w-datasheet.pdf)


## Chip CYW43439

Ambas as versões, Pico e pico W, utilizam o mesmo microcontrolador RP2040. A diferença é que na pico W o chip RP2040 faz a interface wireless por meio do chip CYW43439 da Infineon. A especificação do chip inclui:

- WiFi 4 (802.11n), Single-band (2.4 GHz)
- WPA3
- SoftAP (Até 4 clientes)
- Bluetooth 5.2
    - Suporte para Bluetooth LE Central and Peripheral roles
    - Suporte para Bluetooth Classic

Na Pico W, alguns pinos internos (usuário não tem acesso) são direcionados para comunicação com o CYW43439 e foram substituídos pelo GPIO presente no CY43439. Esses podem ser controládos pelo usuário, esses pinos são:

- WL_GPIO2 – (Entrada) Sentido VBUS. ALTO quando VBUS está presente (Veja o datasheet)
- WL_GPIO1 – (Saída) Controla o pino SMPS Power Save integrado (Veja o datasheet)
- WL_GPIO0 – (Saída) Controla o LED On-board

!!! warning
    Tanto a versão Pico como a Pico W possuem um led on-board que vem soldado na placa para realização de testes e debug. Na versão Pico é controlado pelo GPIO25. Já na versão Pico W, o GPIO25 é reservado para comunicação SPI com o módulo wireless, mas podemos fazer o controle desse led diretamente pelo módulo wireless no pino `WL_GPIO0`.
   

## RP2040 / PICO W

Vamos utilizar a interface do CYW43439 para fazer um pisca led. O intuito é entender as configurações básicas para desenvolver aplicações utlizando a versão Pico W.  

### SDK

Para usar a Pico W você pode utilizar como base qualquer projeto base que já desenvolvido e deve modificar o `CMakeLists.txt` que está na raiz do projeto (onde fica a pasta build).  Set `PICO_BOARD` como `pico_w`.

```diff

set(PICO_BOARD pico_w)

```

Já no arquivo `CMakeLists.txt` dentro da pasta do projeto (onde está o arquivo `main.c`) e adicione `pico_cyw43_arch_none` no `target_link_libraries`:

```diff

set(PICO_BOARD pico_w)

target_link_libraries(
                      ....
                      .....
+                     pico_cyw43_arch_none)
```

No arquivo 'main.c' adicione no headfile:

```c
#include "pico/cyw43_arch.h"
```

### Hello World

Um exemplo completo de um blink led:

[pico-examples/blob/master/pico_w/wifi/blink/picow_blink.c](https://github.com/raspberrypi/pico-examples/blob/master/pico_w/wifi/blink/picow_blink.c){.ah-button}

```c
#include <stdio.h>
#include "pico/cyw43_arch.h"

int main() {
    stdio_init_all();
    if (cyw43_arch_init()) {
        printf("Wi-Fi init failed");
        return -1;
    }
    while (true) {
        cyw43_arch_gpio_put(CYW43_WL_GPIO_LED_PIN, 1);
        sleep_ms(250);
        cyw43_arch_gpio_put(CYW43_WL_GPIO_LED_PIN, 0);
        sleep_ms(250);
    }
}
```
